<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 실시간 검색어 미리보기
     1. 검색어 input에 글자를 입력하면 아래에 "실시간 미리보기"를 준다.
     2. 아래에 최근 검색어 목록이 있고, 항목을 클릭하면 input에 해당 검색어가 다시 채워진다.
     3. 최근 검색어 리스트는 나중에 동적으로 계속 추가되지만, 이벤트는 한번만 걸고싶다. -->
    <input id="search-input" placeholder="검색어를 입력하세요">
    <p id="preview">검색어 미리보기 : (없음)</p>

    <h3>최근 검색어</h3>
    <ul id="recent-list">
        <!-- 예 : <li>React</li> 이런 형태로 계속 추가된다고 가정 -->
    </ul>

    <button id="add-recent">현재 검색어를 최근 검색어에 추가</button>
    <script>
        const input = document.querySelector("#search-input");
        const preview = document.querySelector("#preview");
        const recentList = document.querySelector("#recent-list");
        const addRecentbtn = document.querySelector("#add-recent");

        //1) 입력할 때마다 실시간 미리보기
        input.addEventListener('input',function(event){
            const value = event.target.value.trim();

            if(value === ''){
                preview.textContent = '검색어 미리보기 : (없음)';
            } else {
                preview.textContent = `검색어 미리보기 : ${value}`;
            }
        });

        //2) 버튼을 누르면 현재 검색어를 최근 검색어 목록에 추가
        addRecentbtn.addEventListener('click',function(){
            //input태그에 적힌 내용을 value에 담는다.
            const value = input.value.trim();
            //value의 내용이 비어있다면 함수 종료
            if(value=== '') return;

            //<li></li>태그를 하나 만든다.
            const li = document.createElement('li');
            //태그에 value값을 넣는다.
            li.textContent = value;
            //<ul>에 자식요소로 넣는다.
            recentList.prepend(li);
        })

        //3) 최근 검색어 목록 클릭시 -> 이벤트 위임
        recentList.addEventListener('click',function(event){
            //이벤트가 발생한 li
            const li = event.target.closest('li');
            if(!li)return;

            const keyword = li.textContent;
            input.value = keyword;
            preview.textContent = `검색어 미리보기 : ${keyword}`
        })
    </script>
</body>
</html>