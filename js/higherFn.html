<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //함수도 하나의 값이다.

        function add(a,b){
            return a + b;
        }
        //함수의 이름을 이용하여 다른 변수에 대입할 수 있다.
        //함수의 이름에는 함수를 가리키는 참조값이 들어있다.
        const fn = add;

        //다른 함수의 인자로 전달할 수 있다.
        console.log(fn(1,2));

        //함수의 반환값으로 내보낼 수 있다.
        function getFn(){
            return add;
        }

        //즉, 함수도 숫자, 문자열과 같이 "데이터"처럼 사용할 수 있다.

        //고차함수
        //1. 함수를 인자로 받는 함수
        //2. 함수를 결과로 돌려주는 함수

        //"함수를 인자로 받는 함수"
        //setTimeout(함수,지연시간);
        setTimeout(function(){
            console.log("1초 뒤에 실행된다.");
        },1000)

        //setTimeout() -> 고차함수
        //function(){...} -> 인자로 넘겨진 함수(콜백함수)이다.

        const arr = [1,2,3];
        arr.forEach(function(item) {
            console.log(`아이템 : ${item}`);
        })

        //forEach() -> 고차함수
        //function(){...} -> 콜백함수

        //직접 고차함수 만들어보기(인자로 함수를 받는다)
        function repeat(n, action){
            for(let i = 0; i < n; i++){
                action(i); //action이 함수다.
            }
        }
        //숫자 로그찍기
        repeat(5,function(i){
            console.log(i, "번째 반복이다");
        })

        //배열에 값 넣기
        const result = [];
        repeat(5, function(i){
            result.push(i*2);
        })

        console.log(result);

        //repeat은 "반복한다"라는 공통 구조를 가지고 있다.
        //각 반복마다 무엇을 할지는 콜백으로부터 외부에 위임을 한 구조

        //"함수를 반환하는 함수"예제

        function makeAdder(x){
            return function(y){
                return x + y;
            }
        }

        const add5 = makeAdder(5);
        // const add5 = function(y){
        //     return 5 + y;
        // }
        console.log(add5(3));//8

        const add10 = makeAdder(10);
        console.log(add10(3));//13

        //"설정값을 기억하는 함수"와 같은 방식으로 실무에서는 많이 쓰인다.

        //실무에서 고차 함수가 많이 쓰이는 곳
        //1. 이벤트처리
        //addEventListener("이벤트",콜백함수);

        //특정 최소 나이 이상만 남기는 필터 함수 만들기
        //makeAgeFilter(minAge)라는 함수 만들기
        //이 함수는 minAge를 인자로 받아서 age 프로퍼티를 가진
        //객체 배열에서 age>= minAge인 사람만 남기는 필터함수를
        //반환한다.

        const users = [
            {name : 'A', age:15},
            {name : 'B', age:20},
            {name : 'C', age:30},
        ]

        function makeAgeFilter(minAge){
            return function (user){
                return user.age >= minAge;
            }
        }

        const adultFilter = makeAgeFilter(18);
        //const adultFilter = function(user){
        //  return user.age >= minAge;
        //}

        const adult = users.filter(adultFilter);
        //const adult = users.filter(function(user){
        //  return user.age >= minAge;
        //});










    </script>
</body>
</html>