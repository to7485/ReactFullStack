<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1> 사용자 목록 불러오기</h1>
    <button id="loadBtn">데이터 가져오기</button>

    <ul id="userList"></ul>

    <script>
        async function loadUsers(){
            const list = document.querySelector("#userList");
            list.innerHTML = "";

            try{
            //서버에 데이터를 요청한다.
            const res = await fetch("https://jsonplaceholder.typicode.com/users")

            if(!res.ok){
                throw new Error("서버 오류");
            }
            //json으로 변환
            const users = await res.json();


            users.forEach(user => {
                //html 요소로 변환하여 화면에 표시
                const li = document.createElement("li");
                li.textContent = `${user.id}. ${user.name}(${user.email})`
                list.append(li);
            });
            }catch(err){
                list.innerHTML=`<li>데이터 불러오기 실패</li>`;
                console.log(err);
            }
        }

        document.querySelector("#loadBtn")
            .addEventListener("click", loadUsers);
    </script>
</body>
</html>